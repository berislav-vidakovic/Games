# Use lightweight Node image to serve static files
FROM node:20-alpine

WORKDIR /app

# Install lightweight server to serve static files
RUN npm install -g serve

# Copy all pre-built frontend files
COPY panel ./panel
COPY sudoku ./sudoku
COPY connect4 ./connect4

# Expose all ports
EXPOSE 3001 3002 3003

# Run 3 SPA servers
CMD sh -c "\
  serve -s panel -l 3001 & \
  serve -s sudoku -l 3002 & \
  serve -s connect4 -l 3003 & \
  wait"
  